//
//  Generated by the J2ObjC translator.  DO NOT EDIT!
//  source: build/src/main/java/com/adiron/busme/platform/GeoCalc.java
//
//  Created by polar on 5/25/13.
//

#import "IOSObjectArray.h"
#import "com/adiron/busme/integration/GeoPoint.h"
#import "com/adiron/busme/platform/GeoCalc.h"
#import "com/adiron/busme/platform/Location.h"
#import "java/lang/Math.h"

@implementation ComAdironBusmePlatformGeoCalc

+ (double)LAT_PER_FOOT {
  return ComAdironBusmePlatformGeoCalc_LAT_PER_FOOT;
}

+ (double)LON_PER_FOOT {
  return ComAdironBusmePlatformGeoCalc_LON_PER_FOOT;
}

+ (double)FEET_PER_KM {
  return ComAdironBusmePlatformGeoCalc_FEET_PER_KM;
}

+ (double)EARTH_RADIUS_FEET {
  return ComAdironBusmePlatformGeoCalc_EARTH_RADIUS_FEET;
}

+ (double)DEFAULT_PRECISION {
  return ComAdironBusmePlatformGeoCalc_DEFAULT_PRECISION;
}

+ (BOOL)equalCoordinatesWithComAdironBusmePlatformLocation:(ComAdironBusmePlatformLocation *)c1
                        withComAdironBusmePlatformLocation:(ComAdironBusmePlatformLocation *)c2 {
  return [ComAdironBusmePlatformGeoCalc equalCoordinatesWithComAdironBusmePlatformLocation:c1 withComAdironBusmePlatformLocation:c2 withDouble:ComAdironBusmePlatformGeoCalc_DEFAULT_PRECISION];
}

+ (BOOL)equalCoordinatesWithComAdironBusmePlatformLocation:(ComAdironBusmePlatformLocation *)c1
                        withComAdironBusmePlatformLocation:(ComAdironBusmePlatformLocation *)c2
                                                withDouble:(double)precision {
  return [JavaLangMath floorWithDouble:[((ComAdironBusmePlatformLocation *) NIL_CHK(c1)) getLongitude] * precision] == [JavaLangMath floorWithDouble:[((ComAdironBusmePlatformLocation *) NIL_CHK(c2)) getLongitude] * precision] && [JavaLangMath floorWithDouble:[((ComAdironBusmePlatformLocation *) NIL_CHK(c2)) getLatitude] * precision] == [JavaLangMath floorWithDouble:[((ComAdironBusmePlatformLocation *) NIL_CHK(c2)) getLatitude] * precision];
}

+ (double)getCentralAngle1WithComAdironBusmePlatformLocation:(ComAdironBusmePlatformLocation *)c1
                          withComAdironBusmePlatformLocation:(ComAdironBusmePlatformLocation *)c2 {
  double dlon = [JavaLangMath toRadiansWithDouble:[((ComAdironBusmePlatformLocation *) NIL_CHK(c1)) getLongitude] - [((ComAdironBusmePlatformLocation *) NIL_CHK(c2)) getLongitude]];
  double a = [JavaLangMath cosWithDouble:[JavaLangMath toRadiansWithDouble:[((ComAdironBusmePlatformLocation *) NIL_CHK(c2)) getLatitude]]] * [JavaLangMath sinWithDouble:dlon];
  double b = [JavaLangMath cosWithDouble:[JavaLangMath toRadiansWithDouble:([((ComAdironBusmePlatformLocation *) NIL_CHK(c2)) getLatitude])]] * [JavaLangMath sinWithDouble:[JavaLangMath toRadiansWithDouble:[((ComAdironBusmePlatformLocation *) NIL_CHK(c2)) getLatitude]]] * [JavaLangMath cosWithDouble:[JavaLangMath toRadiansWithDouble:[((ComAdironBusmePlatformLocation *) NIL_CHK(c2)) getLatitude]]] * [JavaLangMath cosWithDouble:dlon];
  double c = [JavaLangMath sinWithDouble:[JavaLangMath toRadiansWithDouble:([((ComAdironBusmePlatformLocation *) NIL_CHK(c2)) getLatitude])]] * [JavaLangMath cosWithDouble:[JavaLangMath toRadiansWithDouble:[((ComAdironBusmePlatformLocation *) NIL_CHK(c2)) getLatitude]]] * [JavaLangMath cosWithDouble:[JavaLangMath toRadiansWithDouble:[((ComAdironBusmePlatformLocation *) NIL_CHK(c2)) getLatitude]]] * [JavaLangMath cosWithDouble:dlon];
  return [JavaLangMath atan2WithDouble:[JavaLangMath sqrtWithDouble:a * a + b * b] withDouble:c];
}

+ (double)getCentralAngleVincentyWithComAdironBusmePlatformLocation:(ComAdironBusmePlatformLocation *)c1
                                 withComAdironBusmePlatformLocation:(ComAdironBusmePlatformLocation *)c2 {
  double dlon = [JavaLangMath toRadiansWithDouble:[((ComAdironBusmePlatformLocation *) NIL_CHK(c1)) getLongitude] - [((ComAdironBusmePlatformLocation *) NIL_CHK(c2)) getLongitude]];
  double a = [JavaLangMath cosWithDouble:[JavaLangMath toRadiansWithDouble:[((ComAdironBusmePlatformLocation *) NIL_CHK(c2)) getLatitude]]] * [JavaLangMath sinWithDouble:dlon];
  double b = [JavaLangMath cosWithDouble:[JavaLangMath toRadiansWithDouble:([((ComAdironBusmePlatformLocation *) NIL_CHK(c1)) getLatitude])]] * [JavaLangMath sinWithDouble:[JavaLangMath toRadiansWithDouble:[((ComAdironBusmePlatformLocation *) NIL_CHK(c2)) getLatitude]]] - [JavaLangMath sinWithDouble:[JavaLangMath toRadiansWithDouble:[((ComAdironBusmePlatformLocation *) NIL_CHK(c1)) getLatitude]]] * [JavaLangMath cosWithDouble:[JavaLangMath toRadiansWithDouble:[((ComAdironBusmePlatformLocation *) NIL_CHK(c2)) getLatitude]]] * [JavaLangMath cosWithDouble:dlon];
  double c = [JavaLangMath sinWithDouble:[JavaLangMath toRadiansWithDouble:([((ComAdironBusmePlatformLocation *) NIL_CHK(c1)) getLatitude])]] * [JavaLangMath sinWithDouble:[JavaLangMath toRadiansWithDouble:[((ComAdironBusmePlatformLocation *) NIL_CHK(c2)) getLatitude]]] + [JavaLangMath cosWithDouble:[JavaLangMath toRadiansWithDouble:[((ComAdironBusmePlatformLocation *) NIL_CHK(c1)) getLatitude]]] * [JavaLangMath cosWithDouble:[JavaLangMath toRadiansWithDouble:[((ComAdironBusmePlatformLocation *) NIL_CHK(c2)) getLatitude]]] * [JavaLangMath cosWithDouble:dlon];
  double angle = [JavaLangMath atan2WithDouble:[JavaLangMath sqrtWithDouble:a * a + b * b] withDouble:c];
  return angle;
}

+ (double)getCentralAngleHaversineWithComAdironBusmePlatformLocation:(ComAdironBusmePlatformLocation *)c1
                                  withComAdironBusmePlatformLocation:(ComAdironBusmePlatformLocation *)c2 {
  double dLon = [JavaLangMath toRadiansWithDouble:[((ComAdironBusmePlatformLocation *) NIL_CHK(c2)) getLongitude] - [((ComAdironBusmePlatformLocation *) NIL_CHK(c1)) getLongitude]];
  double dLat = [JavaLangMath toRadiansWithDouble:[((ComAdironBusmePlatformLocation *) NIL_CHK(c2)) getLatitude] - [((ComAdironBusmePlatformLocation *) NIL_CHK(c1)) getLatitude]];
  double lat1 = [JavaLangMath toRadiansWithDouble:[((ComAdironBusmePlatformLocation *) NIL_CHK(c1)) getLatitude]];
  double lat2 = [JavaLangMath toRadiansWithDouble:[((ComAdironBusmePlatformLocation *) NIL_CHK(c2)) getLatitude]];
  double a = [JavaLangMath sinWithDouble:dLat / 2] * [JavaLangMath sinWithDouble:dLat / 2] + [JavaLangMath sinWithDouble:dLon / 2] * [JavaLangMath sinWithDouble:dLon / 2] * [JavaLangMath cosWithDouble:lat1] * [JavaLangMath cosWithDouble:lat2];
  double angle = 2 * [JavaLangMath atan2WithDouble:[JavaLangMath sqrtWithDouble:a] withDouble:[JavaLangMath sqrtWithDouble:1 - a]];
  return angle;
}

+ (double)getCentralAngleWithComAdironBusmePlatformLocation:(ComAdironBusmePlatformLocation *)c1
                         withComAdironBusmePlatformLocation:(ComAdironBusmePlatformLocation *)c2 {
  return [ComAdironBusmePlatformGeoCalc getCentralAngleHaversineWithComAdironBusmePlatformLocation:c1 withComAdironBusmePlatformLocation:c2];
}

+ (double)getGeoDistanceWithComAdironBusmePlatformLocation:(ComAdironBusmePlatformLocation *)c1
                        withComAdironBusmePlatformLocation:(ComAdironBusmePlatformLocation *)c2 {
  if ([ComAdironBusmePlatformGeoCalc equalCoordinatesWithComAdironBusmePlatformLocation:c1 withComAdironBusmePlatformLocation:c2]) {
    return 0.0;
  }
  double ca = [ComAdironBusmePlatformGeoCalc getCentralAngleWithComAdironBusmePlatformLocation:c1 withComAdironBusmePlatformLocation:c2];
  double dist = ComAdironBusmePlatformGeoCalc_EARTH_RADIUS_FEET * ca;
  return [JavaLangMath absWithDouble:dist];
}

+ (double)getGeoAngleWithComAdironBusmePlatformLocation:(ComAdironBusmePlatformLocation *)c1
                     withComAdironBusmePlatformLocation:(ComAdironBusmePlatformLocation *)c2 {
  double x = [((ComAdironBusmePlatformLocation *) NIL_CHK(c2)) getLongitude] - [((ComAdironBusmePlatformLocation *) NIL_CHK(c1)) getLongitude];
  double y = [((ComAdironBusmePlatformLocation *) NIL_CHK(c2)) getLatitude] - [((ComAdironBusmePlatformLocation *) NIL_CHK(c1)) getLatitude];
  y = y <= -180 ? y + 360 : y;
  y = y >= 180 ? y - 360 : y;
  ComAdironBusmePlatformLocation *nw = [ComAdironBusmePlatformGeoCalc getLocationWithDouble:[((ComAdironBusmePlatformLocation *) NIL_CHK(c2)) getLongitude] withDouble:[((ComAdironBusmePlatformLocation *) NIL_CHK(c1)) getLatitude]];
  double ca1 = [ComAdironBusmePlatformGeoCalc getCentralAngleWithComAdironBusmePlatformLocation:c1 withComAdironBusmePlatformLocation:nw];
  double dist1 = ComAdironBusmePlatformGeoCalc_EARTH_RADIUS_FEET * ca1 * [JavaLangMath signumWithDouble:x];
  double ca2 = [ComAdironBusmePlatformGeoCalc getCentralAngleWithComAdironBusmePlatformLocation:c2 withComAdironBusmePlatformLocation:nw];
  double dist2 = ComAdironBusmePlatformGeoCalc_EARTH_RADIUS_FEET * ca2 * [JavaLangMath signumWithDouble:y];
  return [JavaLangMath atan2WithDouble:dist2 withDouble:dist1];
}

+ (BOOL)isOnLineWithComAdironBusmePlatformLocation:(ComAdironBusmePlatformLocation *)c1
                withComAdironBusmePlatformLocation:(ComAdironBusmePlatformLocation *)c2
                                        withDouble:(double)buffer
                withComAdironBusmePlatformLocation:(ComAdironBusmePlatformLocation *)c3 {
  double theta1 = [ComAdironBusmePlatformGeoCalc getGeoAngleWithComAdironBusmePlatformLocation:c1 withComAdironBusmePlatformLocation:c2];
  double theta2 = [ComAdironBusmePlatformGeoCalc getGeoAngleWithComAdironBusmePlatformLocation:c1 withComAdironBusmePlatformLocation:c3];
  double theta3 = theta2 - theta1;
  double hc1c3 = [ComAdironBusmePlatformGeoCalc getGeoDistanceWithComAdironBusmePlatformLocation:c1 withComAdironBusmePlatformLocation:c3];
  double hc1c2 = [ComAdironBusmePlatformGeoCalc getGeoDistanceWithComAdironBusmePlatformLocation:c1 withComAdironBusmePlatformLocation:c2];
  BOOL result = hc1c3 < buffer || [JavaLangMath absWithDouble:theta3] < JavaLangMath_PI / 2.0 && hc1c3 <= hc1c2 + buffer / 2 && [JavaLangMath absWithDouble:[JavaLangMath sinWithDouble:theta3] * hc1c3] <= buffer / 2.0;
  return result;
}

+ (ComAdironBusmePlatformLocation *)getLocationWithDouble:(double)longitude
                                               withDouble:(double)latitude {
  ComAdironBusmePlatformLocation *loc = [[[ComAdironBusmePlatformLocation alloc] initWithNSString:@"YoMama"] autorelease];
  [((ComAdironBusmePlatformLocation *) NIL_CHK(loc)) setLatitudeWithDouble:latitude];
  [((ComAdironBusmePlatformLocation *) NIL_CHK(loc)) setLongitudeWithDouble:longitude];
  return loc;
}

+ (ComAdironBusmeIntegrationGeoPoint *)toGeoPointWithComAdironBusmePlatformLocation:(ComAdironBusmePlatformLocation *)loc {
  ComAdironBusmeIntegrationGeoPoint *point = [[[ComAdironBusmeIntegrationGeoPoint alloc] initWithInt:(int) ([((ComAdironBusmePlatformLocation *) NIL_CHK(loc)) getLatitude] * 1E6) withInt:(int) ([((ComAdironBusmePlatformLocation *) NIL_CHK(loc)) getLongitude] * 1E6)] autorelease];
  return point;
}

+ (ComAdironBusmePlatformLocation *)toLocationWithComAdironBusmeIntegrationGeoPoint:(ComAdironBusmeIntegrationGeoPoint *)gp {
  return [ComAdironBusmePlatformGeoCalc getLocationWithDouble:[((ComAdironBusmeIntegrationGeoPoint *) NIL_CHK(gp)) getLongitudeE6] / 1E6 withDouble:[((ComAdironBusmeIntegrationGeoPoint *) NIL_CHK(gp)) getLatitudeE6] / 1E6];
}

+ (BOOL)isOnLineWithComAdironBusmeIntegrationGeoPoint:(ComAdironBusmeIntegrationGeoPoint *)c1
                withComAdironBusmeIntegrationGeoPoint:(ComAdironBusmeIntegrationGeoPoint *)c2
                                           withDouble:(double)buffer
                withComAdironBusmeIntegrationGeoPoint:(ComAdironBusmeIntegrationGeoPoint *)c3 {
  return [ComAdironBusmePlatformGeoCalc isOnLineWithComAdironBusmePlatformLocation:[ComAdironBusmePlatformGeoCalc toLocationWithComAdironBusmeIntegrationGeoPoint:c1] withComAdironBusmePlatformLocation:[ComAdironBusmePlatformGeoCalc toLocationWithComAdironBusmeIntegrationGeoPoint:c2] withDouble:buffer withComAdironBusmePlatformLocation:[ComAdironBusmePlatformGeoCalc toLocationWithComAdironBusmeIntegrationGeoPoint:c3]];
}

+ (BOOL)isOnLineWithComAdironBusmePlatformLocation:(ComAdironBusmePlatformLocation *)c1
             withComAdironBusmeIntegrationGeoPoint:(ComAdironBusmeIntegrationGeoPoint *)c2
                                        withDouble:(double)buffer
             withComAdironBusmeIntegrationGeoPoint:(ComAdironBusmeIntegrationGeoPoint *)c3 {
  return [ComAdironBusmePlatformGeoCalc isOnLineWithComAdironBusmePlatformLocation:c1 withComAdironBusmePlatformLocation:[ComAdironBusmePlatformGeoCalc toLocationWithComAdironBusmeIntegrationGeoPoint:c2] withDouble:buffer withComAdironBusmePlatformLocation:[ComAdironBusmePlatformGeoCalc toLocationWithComAdironBusmeIntegrationGeoPoint:c3]];
}

+ (BOOL)isOnLineWithComAdironBusmeIntegrationGeoPoint:(ComAdironBusmeIntegrationGeoPoint *)c1
                   withComAdironBusmePlatformLocation:(ComAdironBusmePlatformLocation *)c2
                                           withDouble:(double)buffer
                withComAdironBusmeIntegrationGeoPoint:(ComAdironBusmeIntegrationGeoPoint *)c3 {
  return [ComAdironBusmePlatformGeoCalc isOnLineWithComAdironBusmePlatformLocation:[ComAdironBusmePlatformGeoCalc toLocationWithComAdironBusmeIntegrationGeoPoint:c1] withComAdironBusmePlatformLocation:c2 withDouble:buffer withComAdironBusmePlatformLocation:[ComAdironBusmePlatformGeoCalc toLocationWithComAdironBusmeIntegrationGeoPoint:c3]];
}

+ (BOOL)isOnLineWithComAdironBusmeIntegrationGeoPoint:(ComAdironBusmeIntegrationGeoPoint *)c1
                withComAdironBusmeIntegrationGeoPoint:(ComAdironBusmeIntegrationGeoPoint *)c2
                                           withDouble:(double)buffer
                   withComAdironBusmePlatformLocation:(ComAdironBusmePlatformLocation *)c3 {
  return [ComAdironBusmePlatformGeoCalc isOnLineWithComAdironBusmePlatformLocation:[ComAdironBusmePlatformGeoCalc toLocationWithComAdironBusmeIntegrationGeoPoint:c1] withComAdironBusmePlatformLocation:[ComAdironBusmePlatformGeoCalc toLocationWithComAdironBusmeIntegrationGeoPoint:c2] withDouble:buffer withComAdironBusmePlatformLocation:c3];
}

+ (BOOL)isOnPathWithComAdironBusmeIntegrationGeoPointArray:(IOSObjectArray *)path
                                                withDouble:(double)buffer
                        withComAdironBusmePlatformLocation:(ComAdironBusmePlatformLocation *)c3 {
  ComAdironBusmeIntegrationGeoPoint *p1 = ((ComAdironBusmeIntegrationGeoPoint *) [((IOSObjectArray *) NIL_CHK(path)) objectAtIndex:0]);
  int i = 1;
  while (i < (int) [((IOSObjectArray *) NIL_CHK(path)) count]) {
    ComAdironBusmeIntegrationGeoPoint *p2 = ((ComAdironBusmeIntegrationGeoPoint *) [((IOSObjectArray *) NIL_CHK(path)) objectAtIndex:i]);
    if ([ComAdironBusmePlatformGeoCalc isOnLineWithComAdironBusmeIntegrationGeoPoint:p1 withComAdironBusmeIntegrationGeoPoint:p2 withDouble:buffer withComAdironBusmePlatformLocation:c3]) return YES;
    p1 = p2;
    i++;
  }
  return NO;
}

+ (double)getPathDistanceWithComAdironBusmeIntegrationGeoPointArray:(IOSObjectArray *)path {
  double dist = 0.0;
  ComAdironBusmePlatformLocation *p1 = [ComAdironBusmePlatformGeoCalc toLocationWithComAdironBusmeIntegrationGeoPoint:((ComAdironBusmeIntegrationGeoPoint *) [((IOSObjectArray *) NIL_CHK(path)) objectAtIndex:0])];
  int i = 1;
  while (i < (int) [((IOSObjectArray *) NIL_CHK(path)) count]) {
    ComAdironBusmePlatformLocation *p2 = [ComAdironBusmePlatformGeoCalc toLocationWithComAdironBusmeIntegrationGeoPoint:((ComAdironBusmeIntegrationGeoPoint *) [((IOSObjectArray *) NIL_CHK(path)) objectAtIndex:i])];
    dist += [ComAdironBusmePlatformGeoCalc getGeoDistanceWithComAdironBusmePlatformLocation:p1 withComAdironBusmePlatformLocation:p2];
    p1 = p2;
    i++;
  }
  return dist;
}

- (id)init {
  return [super init];
}

- (void)dealloc {
  [super dealloc];
}

@end
